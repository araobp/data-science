# DFSDM calibration for Knowles MEMS microphones

This page shows if pre-emphasis works or not.

## Condition

- Coefficient for pre-emphasis: 0.95
- 7000 Hz sine wave is generated by a tone generator running on my PC, and the MEMS mic receives the tone via air.

## Measurement result

"System clock 80_000_000 / clock divider 32 / FOSR 128" outperformed System "clock 80_000_000 / clock divider 64 / FOSR 64": SNR is better at 7000Hz.

### System clock 80_000_000 / clock divider 64 / FOSR 64

#### Pre-emphasis disabled

![FFT pre-emphasis disabled](./calibration/fft-pre_emphasis_disabled-64-64.png)

#### Pre-emphasis enabled

![FFT pre-emphasis enabled](./calibration/fft-pre_emphasis_enabled-64-64.png)

![Spectrogram pre-emphasis enabled](./calibration/spectrogram-pre_emphasis_enabled-64-64.png)

![Mel-spectrogram pre-emphasis enabled](./calibration/mel_spectrogram-pre_emphasis_enabled-64-64.png)

### System clock 80_000_000 / clock divider 32 / FOSR 128

#### Pre-emphasis disabled

![FFT pre-emphasis disabled](./calibration/fft-pre_emphasis_disabled-32-128.png)

#### Pre-emphasis enabled

![FFT pre-emphasis enabled](./calibration/fft-pre_emphasis_enabled-32-128.png)

![Spectrogram pre-emphasis enabled](./calibration/spectrogram-pre_emphasis_enabled-32-128.png)

![Mel-spectrogram pre-emphasis enabled](./calibration/mel_spectrogram-pre_emphasis_enabled-32-128.png)

### Confirmation with Welch's method

![Welch's method with pre-emphasis disabled](./calibration/welch_pre_emphasis_disabled.jpg)

![Welch's method with pre-emphasis enabled](./calibration/welch_pre_emphasis_enabled.jpg)


