# Rock Paper Scissors with CubeIDE and STM32Cube.AI

Board: NUCLEO-L476RG board (STM32L476RGT6 Microcontroller)

### Arudino shield for Panasonic AMG8833

I designed my original Arduino shield for AMG8833 in 2019. Refer to [this page](https://github.com/araobp/stm32-mcu/tree/master/NUCLEO-F401RE/Thermography). I use this board with Nucleo L476RG.

=> [Schematic](https://github.com/araobp/stm32-mcu/blob/master/NUCLEO-F401RE/Thermography/kicad/arduino_board.pdf)

### Thermography (without AI)

<img src="doc/thermography_interporated.png" width=300>

This project is just a thermography app with Panasonic AMG8833 (no AI):
- [Thermography](Thermography)

Its GUI is in this folder: [GUI(Python3)](Thermography/GUI)

```
[NUCLEO L476RG] --- UART (VCP via ST-Link) --- COM port [Thermography GUI]
```

### Rock Paper Scissors (with AI)

This project is AI Rock Paper Scissors with Panasonic AMG8333:
- [RockPaperScissors](RockPaperScissors)

Its recognition performance is good.

This experiment proves that twenty of DCT Type-II coefficients with a small DNN is sufficient for recognizing rock/paper/scissors. 

<img src="doc/RockPaperScissors_DCT_DNN_Experiment.jpg" width=200>

<img src="doc/RockPaperScissors_DCT_DNN.png" width=250>

<img src="doc/RockPaperScissors_DCT_DNN_memory_usage.png" width=300>

### CubeMX-related problems I faced in this development

***printf issues***

I faced malloc-related build errors after I added "printf" (_write() function) to "main.c". The following setting solved the problem.

<img src="doc/printf_issue.png" width=450>

The marked part must be elased.

***Build errors***

Building with source code generated by X-Cube-AI results in a lot of errors. Building twice resolves this problem. Why?

***Lack of documentation***

I need example source codes of STM32Cube.AI. This page might help:
https://wiki.stmicroelectronics.cn/stm32mcu/wiki/AI:How_to_perform_motion_sensing_on_STM32L4_IoTnode#Add_AI_bootstrapping_functions

## Other Basic apps (not relevant to Rock Paper Scissors)

- [HelloWorld](HelloWorld)
- [Clock](Clock)

### I2C pin assignment for Arduino shield

Arduino shield uses PB8 and PB9 for I2C SCL and SDA.

<img src="doc/I2C1_SCL.png" width=300>

<img src="doc/I2C1_SDA.png" width=300>

## References

### CMSIS-DSP library

Refer to the following site: Google search "Configuring DSP libraries on STM32CubeIDE"

[API reference](https://arm-software.github.io/CMSIS_5/General/html/index.html)

## References

- https://stackoverflow.com/questions/59395181/cmsis-dsp-in-stm32cubeide
